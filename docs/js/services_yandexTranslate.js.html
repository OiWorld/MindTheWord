<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>JSDoc: Source: services/yandexTranslate.js</title>
	<script src="scripts/prettify/prettify.js">
	</script>
	<script src="scripts/prettify/lang-css.js">
	</script><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	<link href="styles/prettify-tomorrow.css" rel="stylesheet" type="text/css">
	<link href="styles/jsdoc-default.css" rel="stylesheet" type="text/css">
</head>
<body>
	<div id="main">
		<h1 class="page-title">Source: services/yandexTranslate.js</h1>
		<section>
			<article>
				<pre class="prettyprint source linenums"><code>import { http } from '../utils/http';

/** Class for Yandex Translate */
export class YandexTranslate {

  /**
   * Initialize options and credentials
   * @constructor
   * @param {Object} key - Yandex key
   * @param {string} srcLang - source languages
   * @param {string} targetLang - target language
   */
  constructor(key, srcLang, targetLang) {
    // check key
    this.key = key;
    this.srcLang = srcLang;
    this.targetLang = targetLang;
    this.url = 'https://translate.yandex.net/api/v1.5/tr.json/translate?key=' + this.key;
  }

  /**
   * Posts a request for translations and returns a promise.
   * @param {Object} - list of words
   * @returns {Promise} - On resolution gives translation map
   */
  getTranslations(words) {
    var promise = new Promise((resolve, reject) =&gt; {
      this.url += '&amp;lang=' + this.srcLang + '-' + this.targetLang;
      for (var word in words) {
        this.url += '&amp;text=' + word.trim(' ');
      }
      http(this.url)
        .get()
        .then((data) =&gt; {
          console.log('words', words);
          var tMap = this.mapTranslations(JSON.parse(data), words);
          resolve(tMap);
        });
    });
    return promise;
  }

  /**
   * Map source words to translations
   * @param {Array} translations - list of translated words
   * @param {Object} words - source words list
   * @returns {Object} tMap - translation map
   */
  mapTranslations(data, words) {
    var tMap = {},
      i = 0,
      translatedWords = data.text;

    for (let word in words) {
      // add a try catch block
      tMap[word] = translatedWords[i];
      i++;
    }
    return tMap;
  }

  /**
   * Translate an entire input sentence
   * @param {string} text - sentence
   * @returns {Promise} promise - gives translated sentence on resolution
   */
  translateSentence(text) {
    var promise = new Promise((resolve, reject) =&gt; {
      this.url += '&amp;lang=' + this.srcLang + '-' + this.targetLang;
      this.url += '&amp;text=' + text;
      http(this.url)
        .get()
        .then((data) =&gt; {
          resolve(JSON.parse(data).text[0]);
        })
        .catch((e) =&gt; {
          reject(e);
        });
    });
    return promise;
  }
}
</code></pre>
			</article>
		</section>
	</div>
	<nav>
		<h2><a href="index.html">Home</a></h2>
		<h3>Classes</h3>
		<ul>
			<li>
				<a href="-_.html"></a>
			</li>
			<li>
				<a href="BingTranslate.html">BingTranslate</a>
			</li>
			<li>
				<a href="ContentScript.html">ContentScript</a>
			</li>
			<li>
				<a href="GoogleTranslate.html">GoogleTranslate</a>
			</li>
			<li>
				<a href="OptionCtrl.html">OptionCtrl</a>
			</li>
			<li>
				<a href="PopupCtrl.html">PopupCtrl</a>
			</li>
			<li>
				<a href="YandexTranslate.html">YandexTranslate</a>
			</li>
		</ul>
		<h3>Global</h3>
		<ul>
			<li>
				<a href="global.html#checkActiveTabChange">checkActiveTabChange</a>
			</li>
			<li>
				<a href="global.html#checkURLChange">checkURLChange</a>
			</li>
			<li>
				<a href="global.html#contextMenuClickHandler">contextMenuClickHandler</a>
			</li>
			<li>
				<a href="global.html#disableContextMenus">disableContextMenus</a>
			</li>
			<li>
				<a href="global.html#enableContextMenus">enableContextMenus</a>
			</li>
			<li>
				<a href="global.html#initializeLocalStorage">initializeLocalStorage</a>
			</li>
			<li>
				<a href="global.html#setup">setup</a>
			</li>
			<li>
				<a href="global.html#updateContextMenu">updateContextMenu</a>
			</li>
		</ul>
	</nav><br class="clear">
	<footer>
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Jul 13 2016 17:40:20 GMT+0530 (IST)
	</footer>
	<script>
	prettyPrint(); 
	</script> 
	<script src="scripts/linenumber.js">
	</script>
</body>
</html>